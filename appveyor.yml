version: 1.0.{build}

os: Visual Studio 2015

platform: Win32

environment:
    MSVC_DEFAULT_OPTIONS: ON

configuration:
    - Debug
    - Release

init:
    - cmd: cmake --version
    - cmd: msbuild /version

clone_folder: C:\projects\varuna
clone_depth: 5

install:
    - cmd: git submodule update --init --recursive

before_build:
    - cmd: md build
    - cmd: cd build

    - cmd: cmake -G "Visual Studio 14 2015" -DCMAKE_BUILD_TYPE=%configuration% -DLLVM_DIR=C:\Libraries\llvm-4.0.0\lib\cmake\llvm -DBUILD_TESTS=OFF ..

build:
    project: C:\projects\varuna\build\varuna.sln
    parallel: true
    verbosity: normal
